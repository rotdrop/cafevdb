/**
 * Orchestra member, musicion and project management application.
 *
 * CAFEVDB -- Camerata Academica Freiburg e.V. DataBase.
 *
 * @author Claus-Justus Heine
 * @copyright 2011-2016, 2021, 2022 Claus-Justus Heine <himself@claus-justus-heine.de>
 * @license AGPL-3.0-or-later
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program. If not, see <http://www.gnu.org/licenses/>.
 */

#cafevdb-page-header-box.projects {}

#pme-table-container.projects {

  form.pme-form {

    .empty > .not-empty {
      display:none!important;
    }
    .has-content > .only-empty {
      display:none!important;
    }

    &.pme-list {
      .not-list-operation {
        display:none;
      }
      td.pme-cell .pme-cell-squezer {
        max-width:12em;
      }
      td.download-share {
        .button.button-use-icon {
          background-size: 18px 18px;
          padding:4px 11px;
          min-height:24px;
          height:10px;
        }
      }
    }

    td.download-share {
      .button.copy-to-clipboard {
        background-image:url('../../../core/img/actions/clippy.svg');
      }
      .button.create-share-link {
        background-image:url('../../../core/img/actions/add.svg');
      }
      .button.delete-share-link {
        background-image:url('../../../core/img/actions/delete.svg');
      }
      .button.open-cloud {
        background-image:url('../../../core/img/filetypes/folder-external.svg');
      }
    }


    /***************************************************************************
     *
     * Further width styling
     *
     */

    td.pme-value {
      &.projects--instrumentation,
      &.projects--instrumentation-voices,
      &.projects--participant-fields {
        div.chosen-container {
          max-width:40em;
          min-width:20em;
          width:auto !important;
        }
      }
      &.projects--participant-fields {
        width:38em;
        max-width:38em;
        max-height:1em;
        white-space:nowrap;
        overflow:hidden;
        text-overflow:ellipsis;
      }
    }

    &.pme-view, &.pme-delete {
      td.pme-value {
	&.projects--instrumentation,
	&.projects--instrumentation-voices,
	&.projects--participant-fields {
          width:38em;
          max-width:38em;
          max-height:1em;
          white-space:nowrap;
          overflow:hidden;
          text-overflow:ellipsis;
	}
      }
    }

    &.pme-copyadd td.pme-value.projects--participant-fields {
      overflow:inherit;
      text-overflow:inherit;
    }

    td.pme-cell {
      &.projects--instrumentation div.cell-wrapper,
      &.projects--participant-fields div.cell-wrapper,
      &.projects--instrumentation-voices div.cell-wrapper,
      &.projects--mailing-list-id div.cell-wrapper {
        width:10em;
        max-width:10em;
        /* max-height:1em; */
        white-space:nowrap;
        overflow:hidden;
        text-overflow:ellipsis;
      }
    }

    div.cmsarticlecontainer {
      padding: 0 !important;
      /*height:0px;*/
      overflow:hidden;
    }

    #projectWebArticles {
      height: 0;
      overflow: hidden;
    }

    #cmsFrameLoader {
      position: relative;
      top: -7px;
      height: 0;
      width: 100%;
      overflow: visible;
      text-align: center;

      img {}
    }

    #projectArticle-linkpage {
      overflow:visible; /* for chosen */
      min-height:10em;

      [class^="chosen"] {
        border-radius:3px !important;
        /*  border:1px solid #AAA;*/
        background-color: #FFF !important;
      }
    }

    #cmsarticleselect_chosen {
      min-width:20em !important;
      width:auto;
    }

    ul#cmsarticletabs {
      li {
        box-sizing:border-box;
        max-width:25%; /* concert and rehearsals */

        &.ui-tabs-active.ui-state-active {
          max-width:45%;
        }

        a {
          box-sizing:border-box;
          max-width:100%;
          overflow:hidden;
          text-overflow:ellipsis;
        }
      }
    }

    &.project-type-template {
      td .list-id.dropdown-container {
        display:none;
      }
    }

    td {
      .list-id {
        position:relative;
        .list-status {
          position:absolute;
          right:0;
          margin-right: -10px;
          margin-top: -4px;
          font-size: 75%;
          line-height: 12px;
          height:fit-content;
          background-color: lightgray;
          z-index:1;
          white-space:nowrap;
        }
        &.dropdown-container.status-unknown {
          display:none;
        }
        &.status-unset {
          .list-label {
            opacity:25%;
          }
          .list-status {
            color:red;
          }
          .list-action-manage, .list-action-close, .list-action-delete, .list-action-reopen, .list-action-subscribe {
            display:none;
          }
        }
        &.status-closed {
          .list-status {
            color:red;
          }
          .list-action-create, .list-action-close, .list-action-subscribe {
            display:none;
          }
        }
        &.status-active {
          .list-status {
            color:red;
          }
          .list-action-create, .list-action-reopen {
            display:none;
          }
        }
      }
    }

  } /* form.pme-form */

} /* page container */

body:not(.cafevdb-expert-mode) {
  #pme-table-container.projects {
    form.pme-form {
      td {
        .list-id {
          .expert-mode-only {
            display:none !important;
          }
        }
      }
    }
  }
}

body:not(.cafevdb-finance-mode) {
  #pme-table-container.projects {
    form.pme-form {
      td {
        .finance-mode-only {
          display:none !important;
        }
      }
    }
  }
}
